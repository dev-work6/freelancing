(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[677],{5521:(e,s,t)=>{Promise.resolve().then(t.bind(t,2443))},2443:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var r=t(5155),a=t(2115),o=t(6046),n=t(126);function i(){let[e,s]=(0,a.useState)(null),[t,i]=(0,a.useState)(!0),l=(0,o.useRouter)();return((0,a.useEffect)(()=>{(async()=>{try{let{user:e}=await (0,n.HW)();s(e)}catch(e){console.error("Error fetching user data:",e),l.push("/login")}finally{i(!1)}})()},[l]),t)?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):e?(0,r.jsx)("div",{className:"py-6",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Dashboard"}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[(0,r.jsx)("div",{className:"px-4 py-5 sm:px-6",children:(0,r.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"User Information"})}),(0,r.jsx)("div",{className:"border-t border-gray-200",children:(0,r.jsxs)("dl",{children:[(0,r.jsxs)("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Full name"}),(0,r.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:e.name})]}),(0,r.jsxs)("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Email address"}),(0,r.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:e.email})]}),(0,r.jsxs)("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Role"}),(0,r.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2 capitalize",children:e.role})]})]})})]})})]})}):null}},126:(e,s,t)=>{"use strict";t.d(s,{HW:()=>n,vx:()=>i,iD:()=>a,kz:()=>o});var r=t(814);async function a(e){try{let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to login")}let t=await s.json();return localStorage.setItem("authToken",t.token),localStorage.setItem("user",JSON.stringify(t.user)),r.o.success("Logged in successfully"),t}catch(e){throw r.o.error(e instanceof Error?e.message:"Failed to login"),e}}async function o(e){try{let s=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to register")}let t=await s.json();return localStorage.setItem("authToken",t.token),r.o.success("Registered successfully"),t}catch(e){throw r.o.error(e instanceof Error?e.message:"Failed to register"),e}}async function n(){try{let e=localStorage.getItem("authToken"),s=await fetch("/api/auth/me",{credentials:"include",headers:{Authorization:"Bearer ".concat(e)}});if(!s.ok)throw Error("Failed to fetch user");return s.json()}catch(e){throw r.o.error(e instanceof Error?e.message:"Failed to fetch user"),e}}let i=e=>{localStorage.removeItem("user"),localStorage.removeItem("authToken"),e(!1),window.location.href="/"}},6046:(e,s,t)=>{"use strict";var r=t(6658);t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})}},e=>{var s=s=>e(e.s=s);e.O(0,[814,8441,1517,7358],()=>s(5521)),_N_E=e.O()}]);