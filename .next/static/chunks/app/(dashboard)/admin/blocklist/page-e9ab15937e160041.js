(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3400],{428:(e,t,r)=>{Promise.resolve().then(r.bind(r,8018))},8018:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(5155),a=r(2115),l=r(2079),o=r(4085),s=r(814),c=r(8476);function i(){let[e,t]=(0,a.useState)([]),[r,i]=(0,a.useState)(!0),d=async()=>{try{let e=await fetch("/api/contact/block",{cache:"no-store"});if(console.log(e),!e.ok)throw Error("Failed to fetch blocklist");let r=await e.json();t(r)}catch(e){console.error("Error fetching blocklist:",e),s.o.error("Failed to load blocklist")}finally{i(!1)}},u=async(e,t)=>{try{if(!(await fetch("/api/contact/block",{method:t?"DELETE":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t?{email:e}:{email:e,reason:"Re-blocked by admin"})})).ok)throw Error(t?"Failed to unblock email":"Failed to block email");s.o.success(t?"Email unblocked successfully":"Email blocked successfully"),d()}catch(e){console.error("Error toggling block state:",e),s.o.error(t?"Failed to unblock email":"Failed to block email")}};if((0,a.useEffect)(()=>{d()},[]),r)return(0,n.jsx)(c.a,{text:"Loading Blocklist..."});let f=e=>{let t=new Date(e),r=Math.floor((new Date().getTime()-t.getTime())/1e3),n=Math.floor(r/60),a=Math.floor(n/60),l=Math.floor(a/24),o=Math.floor(l/30),s=Math.floor(l/365);return s>0?"".concat(s," year").concat(s>1?"s":""," ago"):o>0?"".concat(o," month").concat(o>1?"s":""," ago"):l>0?"".concat(l," day").concat(l>1?"s":""," ago"):a>0?"".concat(a," hour").concat(a>1?"s":""," ago"):n>0?"".concat(n," minute").concat(n>1?"s":""," ago"):"".concat(r," second").concat(1!==r?"s":""," ago")};return(0,n.jsxs)("div",{className:"container mx-auto py-10",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Email Blocklist Management"}),(0,n.jsx)("div",{className:"rounded-md border",children:(0,n.jsxs)(l.XI,{children:[(0,n.jsx)(l.A0,{children:(0,n.jsxs)(l.Hj,{children:[(0,n.jsx)(l.nd,{children:"Email"}),(0,n.jsx)(l.nd,{children:"Reason"}),(0,n.jsx)(l.nd,{children:"Added On"}),(0,n.jsx)(l.nd,{children:"Status"}),(0,n.jsx)(l.nd,{className:"text-right",children:"Actions"})]})}),(0,n.jsxs)(l.BF,{children:[e.map(e=>(0,n.jsxs)(l.Hj,{children:[(0,n.jsx)(l.nA,{children:e.email}),(0,n.jsx)(l.nA,{children:e.reason}),(0,n.jsx)(l.nA,{children:f(e.createdAt)}),(0,n.jsx)(l.nA,{children:(0,n.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat(e.active?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.active?"Blocked":"Inactive"})}),(0,n.jsx)(l.nA,{className:"text-right",children:(0,n.jsx)(o.$,{variant:e.active?"destructive":"default",size:"sm",onClick:()=>u(e.email,e.active),children:e.active?"Unblock":"Block"})})]},e._id)),0===e.length&&(0,n.jsx)(l.Hj,{children:(0,n.jsx)(l.nA,{colSpan:5,className:"text-center py-4",children:"No blocked emails found"})})]})]})})]})}},8476:(e,t,r)=>{"use strict";r.d(t,{a:()=>l});var n=r(5155);r(2115);var a=r(9602);function l(e){let{size:t="md",className:r,text:l}=e;return(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3",children:[(0,n.jsx)("div",{className:(0,a.cn)("animate-spin rounded-full border-b-2 border-gray-900",{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[t],r)}),l&&(0,n.jsx)("p",{className:"text-sm text-gray-600 animate-pulse",children:l})]})}},4085:(e,t,r)=>{"use strict";r.d(t,{$:()=>i});var n=r(5155),a=r(2115),l=r(2317),o=r(1027),s=r(9602);let c=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),i=a.forwardRef((e,t)=>{let{className:r,variant:a,size:o,asChild:i=!1,...d}=e,u=i?l.DX:"button";return(0,n.jsx)(u,{className:(0,s.cn)(c({variant:a,size:o,className:r})),ref:t,...d})});i.displayName="Button"},2079:(e,t,r)=>{"use strict";r.d(t,{A0:()=>s,BF:()=>c,Hj:()=>i,XI:()=>o,nA:()=>u,nd:()=>d});var n=r(5155),a=r(2115),l=r(9602);let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{className:"relative w-full overflow-auto",children:(0,n.jsx)("table",{ref:t,className:(0,l.cn)("w-full caption-bottom text-sm",r),...a})})});o.displayName="Table";let s=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("thead",{ref:t,className:(0,l.cn)("[&_tr]:border-b",r),...a})});s.displayName="TableHeader";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("tbody",{ref:t,className:(0,l.cn)("[&_tr:last-child]:border-0",r),...a})});c.displayName="TableBody",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("tfoot",{ref:t,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...a})}).displayName="TableFooter";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("tr",{ref:t,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...a})});i.displayName="TableRow";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("th",{ref:t,className:(0,l.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...a})});d.displayName="TableHead";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("td",{ref:t,className:(0,l.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...a})});u.displayName="TableCell",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("caption",{ref:t,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",r),...a})}).displayName="TableCaption"},9602:(e,t,r)=>{"use strict";r.d(t,{cn:()=>l});var n=r(3463),a=r(9795);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,n.$)(t))}},8068:(e,t,r)=>{"use strict";r.d(t,{s:()=>l,t:()=>a});var n=r(2115);function a(...e){return t=>e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}function l(...e){return n.useCallback(a(...e),e)}},2317:(e,t,r)=>{"use strict";r.d(t,{DX:()=>o});var n=r(2115),a=r(8068),l=r(5155),o=n.forwardRef((e,t)=>{let{children:r,...a}=e,o=n.Children.toArray(r),c=o.find(i);if(c){let e=c.props.children,r=o.map(t=>t!==c?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,l.jsx)(s,{...a,ref:t,children:n.isValidElement(e)?n.cloneElement(e,void 0,r):null})}return(0,l.jsx)(s,{...a,ref:t,children:r})});o.displayName="Slot";var s=n.forwardRef((e,t)=>{let{children:r,...l}=e;if(n.isValidElement(r)){let e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(r=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(r);return n.cloneElement(r,{...function(e,t){let r={...t};for(let n in t){let a=e[n],l=t[n];/^on[A-Z]/.test(n)?a&&l?r[n]=(...e)=>{l(...e),a(...e)}:a&&(r[n]=a):"style"===n?r[n]={...a,...l}:"className"===n&&(r[n]=[a,l].filter(Boolean).join(" "))}return{...e,...r}}(l,r.props),ref:t?(0,a.t)(t,e):e})}return n.Children.count(r)>1?n.Children.only(null):null});s.displayName="SlotClone";var c=({children:e})=>(0,l.jsx)(l.Fragment,{children:e});function i(e){return n.isValidElement(e)&&e.type===c}},1027:(e,t,r)=>{"use strict";r.d(t,{F:()=>o});var n=r(3463);let a=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,l=n.$,o=(e,t)=>r=>{var n;if((null==t?void 0:t.variants)==null)return l(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:o,defaultVariants:s}=t,c=Object.keys(o).map(e=>{let t=null==r?void 0:r[e],n=null==s?void 0:s[e];if(null===t)return null;let l=a(t)||a(n);return o[e][l]}),i=r&&Object.entries(r).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{});return l(e,c,null==t?void 0:null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce((e,t)=>{let{class:r,className:n,...a}=t;return Object.entries(a).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...s,...i}[t]):({...s,...i})[t]===r})?[...e,r,n]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}}},e=>{var t=t=>e(e.s=t);e.O(0,[1181,814,8441,1517,7358],()=>t(428)),_N_E=e.O()}]);