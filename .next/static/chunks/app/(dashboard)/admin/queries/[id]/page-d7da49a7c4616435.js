(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1265],{9622:(e,t,a)=>{Promise.resolve().then(a.bind(a,3837))},3837:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var s=a(5155),r=a(2115),l=a(4085),n=a(371),i=a(6046),o=a(814),d=a(9602);function c(e){let{title:t="Not Found",message:a="The requested resource could not be found.",className:r}=e;return(0,s.jsxs)("div",{className:(0,d.cn)("flex flex-col items-center justify-center min-h-[200px] p-4",r),children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:t}),(0,s.jsx)("p",{className:"text-gray-600 text-center",children:a})]})}var m=a(8476),u=a(7837);let x=()=>{let e=(0,i.useParams)(),[t,a]=(0,r.useState)(null),[d,x]=(0,r.useState)(""),[f,h]=(0,r.useState)(!0),[p,g]=(0,r.useState)(!1),[b,y]=(0,r.useState)(!1),[j,v]=(0,r.useState)(!1),[N,w]=(0,r.useState)(!1),[k,C]=(0,r.useState)(""),S=async()=>{try{let t=await fetch("/api/contact/".concat(e.id));if(!t.ok){v(!0);return}let s=await t.json();if(!s){v(!0);return}a(s),"read"!==s.status&&await fetch("/api/contact",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,status:"read"})})}catch(e){console.error("Error fetching contact:",e),v(!0)}finally{h(!1)}};(0,r.useEffect)(()=>{S()},[e.id]);let P=async()=>{if(d.trim()){g(!0);try{(await fetch("/api/contact/reply",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contactId:null==t?void 0:t._id,reply:d,email:null==t?void 0:t.email})})).ok&&(await fetch("/api/contact",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:null==t?void 0:t._id,status:"replied"})}),S(),x(""),a(e=>e?{...e,status:"replied"}:null))}catch(e){console.error("Error sending reply:",e)}finally{g(!1)}}},T=async()=>{if((null==t?void 0:t.email)&&k.trim()){y(!0);try{let e=await fetch("/api/contact/block",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.email,reason:k})}),a=await e.json();if(!e.ok){o.o.error(a.error||"Failed to block email");return}o.o.success("Email blocked successfully"),w(!1),C("")}catch(e){console.error("Error blocking email:",e),o.o.error("Failed to block email")}finally{y(!1)}}};return f?(0,s.jsx)(m.a,{text:"Loading Contact Details..."}):j||!t?(0,s.jsx)(c,{title:"Contact not found",message:"The requested contact could not be found."}):(0,s.jsx)("div",{className:"container mx-auto py-10",children:(0,s.jsxs)("div",{className:"max-w-screen mx-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Contact Details"}),(0,s.jsx)(l.$,{onClick:()=>w(!0),disabled:b,variant:"destructive",children:b?"Blocking...":"Block User"})]}),(0,s.jsx)(u.lG,{open:N,onOpenChange:w,children:(0,s.jsxs)(u.Cf,{children:[(0,s.jsx)(u.c7,{children:(0,s.jsx)(u.L3,{children:"Block User"})}),(0,s.jsxs)("div",{className:"py-4",children:[(0,s.jsx)("label",{className:"font-medium text-gray-600 block mb-2",children:"Reason for Blocking"}),(0,s.jsx)(n.T,{value:k,onChange:e=>C(e.target.value),placeholder:"Enter reason for blocking...",className:"min-h-[100px]"})]}),(0,s.jsxs)(u.Es,{children:[(0,s.jsx)(l.$,{variant:"outline",onClick:()=>w(!1),disabled:b,children:"Cancel"}),(0,s.jsx)(l.$,{variant:"destructive",onClick:T,disabled:b||!k.trim(),children:b?"Blocking...":"Block User"})]})]})}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"font-medium text-gray-600",children:"Name"}),(0,s.jsx)("p",{className:"mt-1",children:t.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"font-medium text-gray-600",children:"Email"}),(0,s.jsx)("p",{className:"mt-1",children:(0,s.jsx)("a",{href:"mailto:".concat(t.email),className:"text-blue-500",children:t.email})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"font-medium text-gray-600",children:"Status"}),(0,s.jsx)("p",{className:"mt-1",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-sm ".concat("replied"===t.status?"bg-blue-100 text-blue-800":"read"===t.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:t.status})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"font-medium text-gray-600",children:"Date"}),(0,s.jsx)("p",{className:"mt-1",children:new Date(t.createdAt).toLocaleString()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"font-medium text-gray-600",children:"Message"}),(0,s.jsx)("p",{className:"mt-1 whitespace-pre-wrap",children:t.message})]}),t.replies&&t.replies.length>0&&(0,s.jsxs)("div",{className:"mt-8",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Reply History"}),(0,s.jsx)("div",{className:"space-y-4",children:t.replies.map(e=>(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border",children:[(0,s.jsx)("p",{className:"whitespace-pre-wrap",children:e.message}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["Sent on: ",new Date(e.createdAt).toLocaleString()]})]},e._id))})]}),(0,s.jsxs)("div",{className:"mt-8",children:[(0,s.jsx)("label",{className:"font-medium text-gray-600 block mb-2",children:"New Reply"}),(0,s.jsx)(n.T,{value:d,onChange:e=>x(e.target.value),placeholder:"Type your reply here...",className:"min-h-[150px]"})]}),(0,s.jsx)(l.$,{onClick:P,disabled:p||!d.trim(),className:"w-full mt-4",children:p?"Sending...":"Send Reply"})]})]})})}},8476:(e,t,a)=>{"use strict";a.d(t,{a:()=>l});var s=a(5155);a(2115);var r=a(9602);function l(e){let{size:t="md",className:a,text:l}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3",children:[(0,s.jsx)("div",{className:(0,r.cn)("animate-spin rounded-full border-b-2 border-gray-900",{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[t],a)}),l&&(0,s.jsx)("p",{className:"text-sm text-gray-600 animate-pulse",children:l})]})}},4085:(e,t,a)=>{"use strict";a.d(t,{$:()=>d});var s=a(5155),r=a(2115),l=a(2317),n=a(1027),i=a(9602);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:a,variant:r,size:n,asChild:d=!1,...c}=e,m=d?l.DX:"button";return(0,s.jsx)(m,{className:(0,i.cn)(o({variant:r,size:n,className:a})),ref:t,...c})});d.displayName="Button"},7837:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>m,Es:()=>x,L3:()=>f,c7:()=>u,lG:()=>o,rr:()=>h});var s=a(5155),r=a(2115),l=a(7782),n=a(767),i=a(9602);let o=l.bL;l.l9;let d=l.ZL;l.bm;let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.hJ,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});c.displayName=l.hJ.displayName;let m=r.forwardRef((e,t)=>{let{className:a,children:r,...o}=e;return(0,s.jsxs)(d,{children:[(0,s.jsx)(c,{}),(0,s.jsxs)(l.UC,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...o,children:[r,(0,s.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(n.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=l.UC.displayName;let u=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};u.displayName="DialogHeader";let x=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};x.displayName="DialogFooter";let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});f.displayName=l.hE.displayName;let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...r})});h.displayName=l.VY.displayName},371:(e,t,a)=>{"use strict";a.d(t,{T:()=>n});var s=a(5155),r=a(2115),l=a(9602);let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("textarea",{className:(0,l.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...r})});n.displayName="Textarea"},9602:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var s=a(3463),r=a(9795);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},6046:(e,t,a)=>{"use strict";var s=a(6658);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})}},e=>{var t=t=>e(e.s=t);e.O(0,[1181,814,12,8441,1517,7358],()=>t(9622)),_N_E=e.O()}]);