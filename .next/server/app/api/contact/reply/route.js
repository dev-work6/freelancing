(()=>{var e={};e.id=8959,e.ids=[8959],e.modules={56037:e=>{"use strict";e.exports=require("mongoose")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79646:e=>{"use strict";e.exports=require("child_process")},55511:e=>{"use strict";e.exports=require("crypto")},14985:e=>{"use strict";e.exports=require("dns")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},91645:e=>{"use strict";e.exports=require("net")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},27910:e=>{"use strict";e.exports=require("stream")},34631:e=>{"use strict";e.exports=require("tls")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},97887:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>y,routeModule:()=>x,serverHooks:()=>f,workAsyncStorage:()=>g,workUnitAsyncStorage:()=>m});var s={};t.r(s),t.d(s,{POST:()=>d});var o=t(42706),i=t(28203),n=t(45994),a=t(39187),p=t(3322),c=t(43694),u=t(68752),l=t(75510);async function d(e){try{let{contactId:r,reply:t,email:s}=await e.json();if(!r||!t||!s)return a.NextResponse.json({error:"Missing required fields"},{status:400});if(await (0,c.A)(),(await (0,l.l)({email:s})).blocked)return a.NextResponse.json({error:"Unable to send reply",message:"This email address has been blocked"},{status:403});if(!await p.A.findByIdAndUpdate(r,{status:"replied",$push:{replies:{message:t}}},{new:!0}))return a.NextResponse.json({error:"Contact not found"},{status:404});let o=await (0,u.s)({to:s,subject:"Your Inquiry Response | Dev Daim - Professional Development Solutions",text:t,html:`
        <div style="max-width: 700px; margin: 0 auto; padding: 40px 20px; font-family: 'Helvetica Neue', Arial, sans-serif; background-color: #ffffff;">
          <div style="background: linear-gradient(135deg, #1a1a1a 0%, #333333 100%); padding: 40px; border-radius: 16px; margin-bottom: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);">
            <img src="${process.env.NEXT_PUBLIC_APP_URL}/logo.png" alt="Dev Daim Logo" style="width: 180px; margin-bottom: 30px; filter: brightness(0) invert(1);"/>
            <h2 style="color: #ffffff; font-size: 28px; margin-bottom: 25px; font-weight: 600;">Thank You for Reaching Out</h2>
            <div style="background-color: rgba(255,255,255,0.95); padding: 30px; border-radius: 12px; border-left: 6px solid #00ff88; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
              <p style="color: #2c2c2c; line-height: 1.8; font-size: 16px; margin-bottom: 25px;">${t}</p>
            </div>
          </div>
          <div style="padding: 0 20px;">
            <p style="color: #2c2c2c; font-size: 16px; margin-bottom: 8px;">Ready to transform your ideas into reality?</p>
            <p style="font-weight: 600; color: #1a1a1a; font-size: 20px; margin-bottom: 25px;">Dev Daim | Professional Development Solutions</p>
            <div style="margin-top: 25px; text-align: center;">
              <a href="${process.env.NEXT_PUBLIC_APP_URL}" style="display: inline-block; background: linear-gradient(135deg, #00ff88 0%, #00cc6a 100%); color: #1a1a1a; text-decoration: none; padding: 15px 30px; border-radius: 30px; font-weight: 600; margin: 0 10px; transition: all 0.3s ease;">Explore Our Work</a>
              <a href="https://wa.me/917889557560" style="display: inline-block; background: #1a1a1a; color: #ffffff; text-decoration: none; padding: 15px 30px; border-radius: 30px; font-weight: 600; margin: 0 10px; transition: all 0.3s ease;">Let's Connect</a>
            </div>
          </div>
        </div>
      `});return console.log("Email sent successfully:",o),a.NextResponse.json({message:"Reply sent successfully"},{status:200})}catch(e){return console.error("Error sending reply:",e),a.NextResponse.json({error:"Internal server error"},{status:500})}}let x=new o.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/contact/reply/route",pathname:"/api/contact/reply",filename:"route",bundlePath:"app/api/contact/reply/route"},resolvedPagePath:"C:\\Users\\Administrator\\Desktop\\freelance_work_showcase\\app\\api\\contact\\reply\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:g,workUnitAsyncStorage:m,serverHooks:f}=x;function y(){return(0,n.patchFetch)({workAsyncStorage:g,workUnitAsyncStorage:m})}},96487:()=>{},78335:()=>{},43694:(e,r,t)=>{"use strict";t.d(r,{A:()=>n});var s=t(56037),o=t.n(s);if(!process.env.MONGODB_URI)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let i=process.env.MONGODB_URI,n=async function(){try{let e=await o().connect(i);return console.log("MongoDB connected successfully"),e}catch(e){throw console.error("Error connecting to MongoDB:",e),e}}},68752:(e,r,t)=>{"use strict";t.d(r,{s:()=>o});var s=t(98721);async function o({to:e,subject:r,text:t,html:o}){try{let i=s.createTransport({host:process.env.SMTP_HOST,port:Number(process.env.SMTP_PORT),secure:!0,auth:{user:process.env.SMTP_USER,pass:process.env.SMTP_PASSWORD}}),n=await i.sendMail({from:{name:"Response to Your Service Inquiry",address:process.env.SMTP_FROM_EMAIL},to:e,subject:r,text:t,html:o});return console.log("Email sent successfully:",n.messageId),n}catch(e){throw console.error("Error sending email:",e),Error("Failed to send email")}}},75510:(e,r,t)=>{"use strict";t.d(r,{l:()=>i});var s=t(43694),o=t(83879);async function i({email:e}){try{await (0,s.A)();let r=await o.A.findOne({email:e.toLowerCase(),active:!0});if(r)return{blocked:!0,reason:r.reason};return{blocked:!1}}catch(e){return console.error("Error checking block status:",e),{blocked:!1}}}},83879:(e,r,t)=>{"use strict";t.d(r,{A:()=>n});var s=t(56037),o=t.n(s);let i=new(o()).Schema({email:{type:String,required:!0,unique:!0,trim:!0,lowercase:!0},reason:{type:String,required:!0},userId:{type:o().Schema.Types.ObjectId,ref:"User",required:!1},blockedAt:{type:Date,default:Date.now},active:{type:Boolean,default:!0}},{timestamps:!0}),n=o().models.Blocklist||o().model("Blocklist",i)},3322:(e,r,t)=>{"use strict";t.d(r,{A:()=>n});var s=t(56037),o=t.n(s);let i=new(o()).Schema({name:{type:String,required:!0,trim:!0},email:{type:String,required:!0},message:{type:String,required:!0},status:{type:String,enum:["unread","read","replied"],default:"unread"},replies:[{message:{type:String,required:!0},createdAt:{type:Date,default:Date.now}}]},{timestamps:!0}),n=o().models.Contact||o().model("Contact",i)}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[1989,5452,8721],()=>t(97887));module.exports=s})();